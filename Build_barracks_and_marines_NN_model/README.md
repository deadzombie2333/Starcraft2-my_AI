# Updates:
10/23/2017. Decrease game speed will increase the average score of my agent. Just uploaded a video of this agent in normaly game speed with score of 138. https://youtu.be/XY0YOSn_xRk

# Mini game, build marines:

In mini game build marine, agent is attempt to build as many marine as possible with only 8 minefields and one command center. This simulate the “Macro” in Starcraft 2 where player have to balance between many factor such as timing of build supply depot, total worker built and number of barracks build. Based on my understanding, success of this mini game rely on certain factors: 1, build exact amount of worker such that mineral mining is maximized; 2, in exacting time, build supply depot such that there are enough supply to build marine; 3, build exact amount of barracks such that minerals harvested can support marine production with small amount of mineral reserve. In brief, is to design a build order based on current mineral and supply such that marine build is in high speed and continuous.

# AI architecture:

In this AI design, I attempt to design a threshold system which quantify the desired ratio or parameter of ideal system. Based on current status such as minerals, worker supply, maximum supply etc., threshold system compare the ratio with the intended threshold of ideal system. It then conclude which ratio is the farthest away from ideal and use the corresponding build to compensate for this shortness. If all ratios are larger than ideal threshold, the system is considered in optimal and no operation will be necessary.

The agent is designed on three thresholds: 1, ratio between worker supply and number of mineral mines available; 2, ratio between potential supply and number of barrack; 3, ratio between number of barrack and number of worker count. It is obvious that all three thresholds are connect and while all three thresholds are ideal (not less than its design ideal ratio value), build marine command will be given. First ratio is simple, to build enough SCV for each mineral mines. In second ratio, potential supply is the sum of current supply and supplies generated by supply depot under construction. To avoid divide zero error, denominator of this ratio add 1 arbitrarily. For this ratio, it indicate that for more barracks, larger room for supply should be considered. Third ratio quantify the capability of SCV in harvesting minerals to support continuous production of a barrack. In another word, mineral consumption rate of all barracks should meet the harvest rate of all workers.

The agent architecture is not only designed for the use of this mini game, it can have general application in full game AI design. For example, in different tactics, ratio can vary. For early rush tactic (higher early game army count), compare to normal tactic, ratio 1 should be lower to guaranteed more resources are focus on build more army. For greedy tactic (faster expand), ratio 3 should be lower to have more mineral to expand to other mine locations. Furthermore, similar threshold can be applied to vespene gas where ratio between factory, star port as well as tech lab and reactor over number of vespene gas can be considered further. 
Meanwhile, this agent show some rigidness in its structure which may influence its performance in real game. Army only build after all thresholds are satisfied. In real game, it is possible that one start training army in completed barrack while some barrack is building. This issue can be resolved if one can rotating over several command instead of taking series of command. This idea is out of the scope of current project so I will attempt if time allowed.

# Result and discussion:

In this mini game training, we take 8 candidates in each generation while each candidate have 2 simulations and the score of this candidate is the average score over this two attempts. I slightly changed the genetic algorithm used to separate out candidate with zero score which have zero chance to be selected as elite. The cause of zero candidate is then analyzed and replaced by other random candidate with the exemption of this cause. Therefore, converge of genetic algorithm is enhanced in this training process.

Training of build marine is successful. Use the modified genetic algorithm, one can converge to a satisfactory score within 3 generations. Highest score observed for all candidates in all generation are 143 but this is unstable. Most optimal agent have average score of 128 and standard deviation of 2.5 which is very stable and close to human score in this mini game. Recorded video of three simulation use elite agent can be found here: https://youtu.be/ZYEnr2eBPVI. 

Performance of modified genetic algorithm and original genetic algorithm can be compare by using same initial candidate (use same random candidate as first generation).

![ScreenShot](https://github.com/deadzombie2333/Starcraft2-my_AI/blob/master/Build_barracks_and_marines_NN_model/Figure_4.png)

Above figure demonstrate the performance of original genetic algorithm in finding optimal threshold for each parameter. Many candidate generate use this algorithm remains zero after several generations while the highest score acquired is around 120.

![ScreenShot](https://github.com/deadzombie2333/Starcraft2-my_AI/blob/master/Build_barracks_and_marines_NN_model/Figure_2.png)
![ScreenShot](https://github.com/deadzombie2333/Starcraft2-my_AI/blob/master/Build_barracks_and_marines_NN_model/Figure_3.png)

After some modification in zero candidate elimination and replacement, performance of genetic algorithm improved dramatically. Above two figures show the modified algorithm eliminate most of zero candidates and improved GA in a great margin.

FYI: I can only achieve 123 in many attempts. Seems like my AI can, at least, beat me in this game.
